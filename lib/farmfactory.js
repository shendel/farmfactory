var farmFactory=function(){"use strict";var e=function(){return(e=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function M(i,o,r,u){return new(r=r||Promise)(function(t,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function a(t){try{s(u.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(n,a)}s((u=u.apply(i,o||[])).next())})}function C(a,s){var i,o,r,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(r=2&e[0]?o.return:e[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,e[1])).done)return r;switch(o=0,(e=r?[2&e[0],r.value]:e)[0]){case 0:case 1:r=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(r=0<(r=u.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3]))u.label=e[1];else if(6===e[0]&&u.label<r[1])u.label=r[1],r=e;else{if(!(r&&u.label<r[2])){r[2]&&u.ops.pop(),u.trys.pop();continue}u.label=r[2],u.ops.push(e)}}e=s.call(a,u)}catch(t){e=[6,t],o=0}finally{i=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}var n={opts:null,web3:null,account:null},S=function(){return n},i=function(t){n=e(e({},n),t)},s="ff-modals-root",t=function(t){var a=this;this.open=function(t){void 0===t&&(t={});n={title:a.opts.title,content:a.opts.content},e=n.title,n=n.content;var e='\n  <div class="ff-overlay">\n    <div class="ff-modal">\n      <div class="ff-modal-headline">\n        <div class="ff-modal-title">'+(void 0===e?"":e)+'</div>\n        <button class="ff-modal-close" type="button" aria-label="Close the dialog">\n          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path fill="currentColor" d="M18.3 5.70997C17.91 5.31997 17.28 5.31997 16.89 5.70997L12 10.59L7.10997 5.69997C6.71997 5.30997 6.08997 5.30997 5.69997 5.69997C5.30997 6.08997 5.30997 6.71997 5.69997 7.10997L10.59 12L5.69997 16.89C5.30997 17.28 5.30997 17.91 5.69997 18.3C6.08997 18.69 6.71997 18.69 7.10997 18.3L12 13.41L16.89 18.3C17.28 18.69 17.91 18.69 18.3 18.3C18.69 17.91 18.69 17.28 18.3 16.89L13.41 12L18.3 7.10997C18.68 6.72997 18.68 6.08997 18.3 5.70997Z"></path>\n          </svg>\n        </button>\n      </div>\n      <div class="ff-modal-content">\n        '+(void 0===n?"":n)+"\n      </div>\n    </div>\n  </div>\n",n=document.getElementById(s);n.innerHTML=e,a.elems={root:e=n,overlay:e.querySelector(".ff-overlay"),modal:e.querySelector(".ff-modal"),closeButton:e.querySelector(".ff-modal-close"),title:e.querySelector(".ff-modal-title"),content:e.querySelector(".ff-modal-content")},null!=t&&t.title&&(a.elems.title.innerText=t.title),a.elems.overlay.addEventListener("click",a.close),a.elems.modal.addEventListener("click",function(t){t.stopPropagation()}),a.elems.closeButton.addEventListener("click",a.close),a.opts.onOpen.bind(a)(t)},this.close=function(){a.elems.root.innerHTML=""},this.opts=t},A=new t({onOpen:function(t){t=(void 0===t?{}:t).message;this.elems.root.querySelector(".ff-modal-content").innerHTML=t||"Something went wrong"}}),a=(o.prototype.addHandler=function(t){var e=this;this.handlers.push(t.bind({unsubscribe:function(){e.removeHandler(t)}}))},o.prototype.removeHandler=function(t){t=this.handlers.indexOf(t);this.handlers.splice(t,1)},o.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){try{t.apply(void 0,e)}catch(t){console.error(t)}})},o);function o(t){this.name=t,this.handlers=[]}function r(){this.events={}}r.prototype.getEvent=function(t){var e=this.events[t];return e||(e=new a(t),this.events[t]=e),e},r.prototype.subscribe=function(t,e){t=this.getEvent(t);return t.addHandler(e),{event:t,handler:e}},r.prototype.unsubscribe=function(t,e){this.getEvent(t).removeHandler(e)},r.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.getEvent(t);t&&t.call.apply(t,e)},r.prototype.once=function(t,n){var a=this.getEvent(t),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.apply(void 0,t)&&a.removeHandler(s)};return a.addHandler(s),{event:a,handlerWrapper:s}};function u(){return M(void 0,void 0,void 0,function(){var e,n,a,s;return C(this,function(t){switch(t.label){case 0:return n=S(),e=n.opts,[4,(n=n.web3).eth.getChainId()];case 1:return(a=t.sent(),console.log("web3 chain ID:",a),(a={1:"mainnet",5:"goerli",56:"bsc",97:"bsc_test",100:"xdai",137:"matic",250:"fantom",16666e5:"harmony",43114:"avax",1285:"moonriver",80001:"mumbai",1313161554:"aurora",25:"cronos",180:"ame",42161:"arbeth_mainnet",19845:"btcix",11155111:"sepolia",4e3:"ozone"}[a])&&a.toLowerCase()===e.networkName.toLowerCase())?[4,n.eth.getAccounts()]:(A.open({title:"Error",message:"We've detected that you need to switch your wallet's network from <b>"+a+"</b> to <b>"+e.networkName+"</b> network."}),[2]);case 2:return a=t.sent(),s=a[0],i({account:s}),s?(console.log("account connected:",s),v.dispatch("account connected")):p(),[2]}})})}function y(t,e){return{farm:k(t,w,e.farmAddress),rewards:k(t,b,e.rewardsAddress),staking:k(t,g,e.stakingAddress)}}function m(t,e){return new window.BigNumber(t).times(new window.BigNumber(10).pow(e)).toString(10)}function h(t){var e;return t&&(/^\d+$/.test(t)||(e=Number(t).toFixed(5),/0\.00000/.test(e)&&(e=Number(t).toFixed(8)),/0\.0000000/.test(e))?t:e)}var d,l,v=new r,c=function(t){window.Web3?(t=new window.Web3(t),i({web3:t}),console.log("web3 initialized"),v.dispatch("web3 init")):A.open({message:"Web3 is required"})},p=function(){return M(void 0,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return(console.log("Killing the wallet connection",l),l.close)?[4,l.close()]:[3,2];case 1:t.sent(),l=null,t.label=2;case 2:return[4,d.clearCachedProvider()];case 3:return t.sent(),i({account:null}),console.log("finalize disconnect"),[2]}})})},f=function(){var t=S().opts;d=new window.Web3Modal.default({cacheProvider:!0,providerOptions:(null==(t=t.wallet)?void 0:t.providerOptions)||{},disableInjectedProvider:!1});try{localStorage.removeItem("walletconnect")}catch(t){}(window.web3ModalInstance=d).on("connect",function(t){return M(void 0,void 0,void 0,function(){return C(this,function(t){return console.log("web3modal initialized"),[2]})})}),d.on("disconnect",function(){return M(void 0,void 0,void 0,function(){return C(this,function(t){return console.log("web3modal disconnected"),[2]})})}),d.on("error",function(t){console.log("web3modal error:",t)}),d.cachedProvider},H=function(){return M(void 0,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,d.connect()];case 1:return e=t.sent(),c(e),e.on("accountsChanged",function(t){console.log("provider account changed",t),u()}),e.on("chainChanged",function(t){console.log("provider chain changed",t),u()}),e.on("networkChanged",function(t){console.log("provider network changed",t),u()}),[4,u()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error(e),[3,4];case 4:return[2]}})})},w=[{inputs:[{internalType:"address",name:"_rewardsToken",type:"address"},{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"uint256",name:"_rewardsDuration",type:"uint256"},{internalType:"uint256",name:"_stakingTokensDecimal",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Recovered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newDuration",type:"uint256"}],name:"RewardsDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getRewardForDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastTimeRewardApplicable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"a",type:"uint256"},{internalType:"uint256",name:"b",type:"uint256"}],name:"min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"reward",type:"uint256"}],name:"notifyRewardAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"periodFinish",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"n",type:"uint256"},{internalType:"uint256",name:"e",type:"uint256"}],name:"pow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"recoverERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rewardsDuration",type:"uint256"}],name:"setRewardsDuration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingTokensDecimalRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],b=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"string"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"value",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"from",type:"address"}],name:"getAvailableBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"tokensMinted",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"value",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isMinter",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"freezeFor",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"freezeOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"},{name:"_unfreezeTimestamp",type:"uint256"},{name:"_subsequentUnlock",type:"bool"}],name:"mintWithFreeze",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"maxSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}],g=b,k=function(t,e,n){return new t.eth.Contract(e,n)},T=new t({title:"Deposit",content:'\n    <div class="ff-text-field-container">\n      <div class="ff-text-field-label">Available to deposit:</div>\n      <input class="ff-text-field" type="text" value="" placeholder="0.0" />\n    </div>\n    <div class="ff-modal-buttons">\n      <button class="ff-button" type="button">Deposit</button>\n    </div>\n  ',onOpen:function(t){var n,s,e=this,i=t.contracts,o=t.stakingDecimals,a=t.stakingTokenSymbol,t=S(),r=t.opts.networkName,u=t.account,d=!1,l=this.elems.root.querySelector(".ff-text-field-label"),c=this.elems.root.querySelector(".ff-text-field"),p=this.elems.root.querySelector(".ff-modal-buttons"),f=this.elems.root.querySelector(".ff-button");i.staking.methods.balanceOf(u).call().then(function(t){var e=h(Number(t)/Math.pow(10,o));s=t,n=e,l.innerHTML="Available to deposit: <b>"+e+" "+a+"</b> ",0<e&&((t=document.createElement("a")).className="ff-max-balance-button",t.innerHTML="<b>use max</b>",l.appendChild(t),t.addEventListener("click",function(){c.value=e}))}),f.addEventListener("click",function(){return M(e,void 0,void 0,function(){var e,a=this;return C(this,function(t){return d||0<(e=Number(c.value))&&(d=!0,f.disabled=!0,f.innerHTML='<div class="ff-loader"></div>',e=c.value===n?s:m(e,o),i.farm.methods.stake(e).send({from:u}).on("transactionHash",function(t){var e=document.createElement("div"),n=(e.classList.add("ff-transaction-link"),"https://"+r.toLowerCase()+".etherscan.io/tx/"+t);"bsc"===r.toLowerCase()&&(n="https://bscscan.com/tx/"+t),"fantom"===r.toLowerCase()&&(n="https://ftmscan.com/tx/"+t),"harmony"===r.toLowerCase()&&(n="https://explorer.harmony.one/tx/"+t),"avax"===r.toLowerCase()&&(n="https://snowtrace.io/tx/"+t),"moonriver"===r.toLowerCase()&&(n="https://moonriver.moonscan.io/tx/"+t),"xdai"===r.toLowerCase()&&(n="https://blockscout.com/xdai/mainnet/tx/"+t),"aurora"===r.toLowerCase()&&(n="https://aurorascan.dev/tx/"+t),"cronos"===r.toLowerCase()&&(n="https://cronoscan.com/tx/"+t),"ame"===r.toLowerCase()&&(n="https://amescan.io/tx/"+t),"btcix"===r.toLowerCase()&&(n="https://btcixscan.com/tx/"+t),"ozone"===r.toLowerCase()&&(n="https://ozonescan.io/tx/"+t),e.innerHTML='Pending transaction: <a href="'+n+'" target="_blank">'+t+"</a>",a.elems.content.insertBefore(e,p)}).on("error",function(t){console.error(t),A.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){v.dispatch("deposit success"),A.open({title:"Transaction successful",message:"Tokens were credited to the contract."})})),[2]})})})}}),x=new t({title:"Withdraw",content:'\n    <div class="ff-text-field-container">\n      <div class="ff-text-field-label">Available to withdraw:</div>\n      <input class="ff-text-field" type="text" value="" placeholder="0.0" />\n    </div>\n    <div class="ff-modal-buttons">\n      <button class="ff-button" type="button">Withdraw</button>\n    </div>\n  ',onOpen:function(t){var n,s,e=this,i=t.contracts,o=t.stakingDecimals,a=t.stakingTokenSymbol,t=S(),r=t.opts.networkName,u=t.account,d=!1,l=this.elems.root.querySelector(".ff-text-field-label"),c=this.elems.root.querySelector(".ff-text-field"),p=this.elems.root.querySelector(".ff-modal-buttons"),f=this.elems.root.querySelector(".ff-button");i.farm.methods.balanceOf(u).call().then(function(t){var e=h(Number(t)/Math.pow(10,o));l.innerHTML="Available to withdraw: <b>"+e+" "+a+"</b>",s=t,n=e,l.innerHTML="Available to deposit: <b>"+e+" "+a+"</b> ",0<e&&((t=document.createElement("a")).className="ff-max-balance-button",t.innerHTML="<b>use max</b>",l.appendChild(t),t.addEventListener("click",function(){c.value=e}))}),f.addEventListener("click",function(){return M(e,void 0,void 0,function(){var e,a=this;return C(this,function(t){return d||0<(e=Number(c.value))&&(d=!0,f.disabled=!0,f.innerHTML='<div class="ff-loader"></div>',e=c.value===n?s:m(e,o),i.farm.methods.withdraw(e).send({from:u}).on("transactionHash",function(t){var e=document.createElement("div"),n=(e.classList.add("ff-transaction-link"),"https://"+r.toLowerCase()+".etherscan.io/tx/"+t);"bsc"===r.toLowerCase()&&(n="https://bscscan.com/tx/"+t),"xdai"===r.toLowerCase()&&(n="https://blockscout.com/xdai/mainnet/tx/"+t),"fantom"===r.toLowerCase()&&(n="https://ftmscan.com/tx/"+t),"harmony"===r.toLowerCase()&&(n="https://explorer.harmony.one/tx/"+t),"avax"===r.toLowerCase()&&(n="https://snowtrace.io/tx/"+t),"moonriver"===r.toLowerCase()&&(n="https://moonriver.moonscan.io/tx/"+t),"aurora"===r.toLowerCase()&&(n="https://aurorascan.dev/tx/"+t),"cronos"===r.toLowerCase()&&(n="https://cronoscan.com/tx/"+t),"ame"===r.toLowerCase()&&(n="https://amescan.io/tx/"+t),"btcix"===r.toLowerCase()&&(n="https://btcixscan.com/tx/"+t),"ozone"===r.toLowerCase()&&(n="https://ozonescan.io/tx/"+t),e.innerHTML='Pending transaction: <a href="'+n+'" target="_blank">'+t+"</a>",a.elems.content.insertBefore(e,p)}).on("error",function(t){console.error(t),A.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){v.dispatch("withdraw success"),A.open({title:"Transaction successful",message:"Tokens have been withdrawn to your address."})})),[2]})})})}}),L=function(t,e){var n;return n=t?"function"==typeof t?t(e):t:n};function q(t){var i=this,e=(this.createButton=function(e,n){var a=e.innerHTML,s=!1;e.addEventListener("click",function(){return M(i,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return s?[2]:(s=!0,e.disabled=!0,e.innerHTML='<div class="ff-loader"></div>',[4,n()]);case 1:return t.sent(),e.disabled=!1,e.innerHTML=a,[2]}})})})},this.handleApproved=function(){i.elems.approveButton.classList.add("ff-hidden"),i.elems.earnSection.classList.remove("ff-hidden"),i.elems.stakeSection.classList.remove("ff-hidden"),i.elems.depositButton.addEventListener("click",function(){T.open({contracts:i.contracts,stakingDecimals:i.state.stakingDecimals,stakingTokenSymbol:i.state.stakingTokenSymbol})}),i.elems.withdrawButton.addEventListener("click",function(){x.open({contracts:i.contracts,stakingDecimals:i.state.stakingDecimals,stakingTokenSymbol:i.state.stakingTokenSymbol})}),i.createButton(i.elems.harvestButton,function(){return M(i,void 0,void 0,function(){var n,e;return C(this,function(t){return e=S(),n=e.opts.networkName,e=e.account,[2,this.contracts.farm.methods.getReward().send({from:e}).on("transactionHash",function(t){var e="https://"+n.toLowerCase()+".etherscan.io/tx/"+t;"bsc"===n.toLowerCase()&&(e="https://bscscan.com/tx/"+t),"xdai"===n.toLowerCase()&&(e="https://blockscout.com/xdai/mainnet/tx/"+t),"fantom"===n.toLowerCase()&&(e="https://ftmscan.com/tx/"+t),"harmony"===n.toLowerCase()&&(e="https://explorer.harmony.one/tx/"+t),"avax"===n.toLowerCase()&&(e="https://snowtrace.io/tx/"+t),"moonriver"===n.toLowerCase()&&(e="https://moonriver.moonscan.io/tx/"+t),"aurora"===n.toLowerCase()&&(e="https://aurorascan.dev/tx/"+t),"cronos"===n.toLowerCase()&&(e="https://cronoscan.com/tx/"+t),"ame"===n.toLowerCase()&&(e="https://amescan.io/tx/"+t),"arbeth_mainnet"===n.toLowerCase()&&(e="https://explorer.arbitrum.io/tx/"+t),"btcix"===n.toLowerCase()&&(e="https://btcixscan.com/tx/"+t),"ozone"===n.toLowerCase()&&(e="https://ozonescan.io/tx/"+t),console.log("Harvest trx:",e)}).on("error",function(t){console.error(t),A.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){v.dispatch("harvest success"),A.open({title:"Transaction successful",message:"Tokens have been transferred to your address."})})]})})})},this.initCommon=function(){return M(i,void 0,void 0,function(){var s,i,o,r,u,d,l,c,p,f,m=this;return C(this,function(t){switch(t.label){case 0:return l=this.opts,s=l.farmAddress,u=l.rewardsAddress,l=l.stakingAddress,o=S().opts.networkName,o={mainnet:"https://mainnet.infura.io/v3/7213b5d53a4943b7af08a9cfce1cf2e2",sepolia:"https://sepolia.infura.io/v3/7213b5d53a4943b7af08a9cfce1cf2e2",goerli:"https://goerli.infura.io/v3/7213b5d53a4943b7af08a9cfce1cf2e2",matic:"https://polygon-rpc.com/",mumbai:"https://rpc-mumbai.maticvigil.com",bsc:"https://bsc-dataseed1.binance.org:443",bsc_test:"https://data-seed-prebsc-1-s1.binance.org:8545",xdai:"https://rpc.xdaichain.com",aurora:"https://mainnet.aurora.dev",fantom:"https://rpc.ftm.tools/",harmony:"https://api.harmony.one",avax:"https://api.avax.network/ext/bc/C/rpc",moonriver:"https://rpc.moonriver.moonbeam.network",cronos:"https://evm.cronos.org",ame:"https://node1.amechain.io/",arbeth_mainnet:"https://arb1.arbitrum.io/rpc",btcix:"https://seed.btcix.org/rpc",ozone:"https://node1.ozonechain.io"}[o.toLowerCase()],o=new window.Web3(window.Web3.givenProvider||window.ethereum||o),i=this,[4,y(o,{farmAddress:s,rewardsAddress:u,stakingAddress:l})];case 1:return i.readContracts=t.sent(),[4,Promise.all([this.readContracts.staking.methods.symbol().call(),this.readContracts.staking.methods.decimals().call(),this.readContracts.rewards.methods.symbol().call(),this.readContracts.rewards.methods.decimals().call(),this.readContracts.staking.methods.balanceOf(s).call(),this.readContracts.farm.methods.rewardRate().call(),this.readContracts.farm.methods.totalSupply().call()])];case 2:return o=t.sent(),r=o[0],u=o[1],d=o[2],l=o[3],o[4],p=o[5],c=o[6],this.elems.tvlTokenName.innerText=h(c/Math.pow(10,u))+" "+r,this.elems.rewardRate.innerText=h(p/Math.pow(10,l)*86400)+" "+d,this.state.stakingTokenSymbol=r,this.state.rewardsTokenSymbol=d,this.state.stakingDecimals=u,this.state.rewardsDecimals=l,this.elems.rewardsTokenSymbol.innerHTML=d,this.elems.stakingTokenSymbol.innerHTML=r,"function"==typeof this.opts.title?this.elems.title.innerHTML=this.opts.title(r,d):"string"==typeof this.opts.title?this.elems.title.innerHTML=this.opts.title:this.elems.title.innerHTML=d+"-"+r,e=this.opts,a=(n={stakingTokenSymbol:r,rewardsTokenSymbol:d}).stakingTokenSymbol,n=n.rewardsTokenSymbol,a=L(e.stakingTokenIcon,a),e=L(e.rewardsTokenIcon,n),c=a||e?{staking:a,rewards:e}:null,this.elems.tokenIcons.innerHTML=c?"\n        "+(c.rewards?'<img class="ff-widget-token-icon" src="'+c.rewards+'" />':"")+"\n        "+(c.staking?'<img class="ff-widget-token-icon" src="'+c.staking+'" />':"")+"\n      ":"",this.elems.apyValue&&("function"==typeof this.opts.apy?this.opts.apy().then(function(t){m.elems.apyValue.innerHTML=t+"%"}):this.elems.apyValue.innerHTML=this.opts.apy+"%"),this.elems.aprValue&&("function"==typeof this.opts.apr?this.opts.apr().then(function(t){m.elems.aprValue.innerHTML=""+t}):this.elems.aprValue.innerHTML=""+this.opts.apr),this.opts.detailsLink?(p=void 0,p="function"==typeof this.opts.detailsLink?this.opts.detailsLink(r,d):this.opts.detailsLink,(f=document.createElement("a")).classList.add("ff-widget-details"),f.innerText="Details",f.href=p,this.elems.root.appendChild(f)):this.opts.detailsClick&&((f=document.createElement("div")).classList.add("ff-widget-details"),f.innerText="Details",f.onclick=function(){m.opts.detailsClick(r,d)},this.elems.root.appendChild(f)),this.elems.depositTokenName.innerHTML=r,this.elems.earnTokenName.innerHTML=d,this.initTimer(),[2]}var e,n,a})})},this.init=function(){return M(i,void 0,void 0,function(){var e,n,a,s;return C(this,function(t){return a=this.opts,e=a.farmAddress,n=a.rewardsAddress,a=a.stakingAddress,s=S().web3,this.elems.unlockButton.classList.add("ff-hidden"),this.contracts=y(s,{farmAddress:e,rewardsAddress:n,stakingAddress:a}),this.updateValues(),v.subscribe("harvest success",this.updateValues),v.subscribe("deposit success",this.updateValues),v.subscribe("withdraw success",this.updateValues),[2]})})},this.initTimer=function(){return M(i,void 0,void 0,function(){var e,n,s,i=this;return C(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.readContracts.farm.methods.periodFinish().call()];case 1:return e=t.sent(),[3,3];case 2:return n=t.sent(),console.error(n),[2];case 3:return 0<(s=Number(e.toString()))-Date.now()/1e3?setInterval(function(){var t=Math.floor((1e3*s-Date.now())/1e3),e=Math.floor(t/86400),n=(t-=86400*e,Math.floor(t/3600)%24),a=(t-=3600*n,Math.floor(t/60)%60),t=(t-=60*a)%60;i.elems.timer.innerHTML=(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)+":"+(a<10?"0"+a:a)+":"+(t<10?"0"+t:t)},1e3):this.elems.timer.innerHTML="Farming not started yet",[2]}})})},this.updateValues=function(){return M(i,void 0,void 0,function(){var e,n,a,s,i,o,r,u,d,l;return C(this,function(t){switch(t.label){case 0:return n=this.opts.farmAddress,e=S().account,[4,Promise.all([this.readContracts.farm.methods.balanceOf(e).call(),this.readContracts.farm.methods.earned(e).call(),this.readContracts.staking.methods.allowance(e,this.opts.farmAddress).call(),this.readContracts.staking.methods.balanceOf(n).call(),this.readContracts.farm.methods.rewardRate().call(),this.readContracts.farm.methods.totalSupply().call()])];case 1:e=t.sent(),n=e[0],a=e[1],d=e[2],e[3],s=e[4],i=e[5],0===Number(d)?this.elems.approveButton.classList.remove("ff-hidden"):this.handleApproved(),d=this.state,o=d.stakingDecimals,r=d.rewardsDecimals,u=d.stakingTokenSymbol,d=d.rewardsTokenSymbol;try{l=1-(i-n)/i,this.elems.userRate.innerText=h(s/Math.pow(10,r)*86400*l)+" "+d,this.elems.userRateHolder.classList.remove("ff-hidden")}catch(t){}return this.elems.rewardRate.innerText=h(s/Math.pow(10,r)*86400)+" "+d,this.elems.earnedAmount.innerText=h(a/Math.pow(10,r)),this.elems.stakedAmount.innerText=h(n/Math.pow(10,o)),this.elems.tvlTokenName.innerText=h(i/Math.pow(10,o))+" "+u,0<a&&(this.elems.harvestButton.disabled=!1),0<n&&(this.elems.withdrawButton.disabled=!1),this.elems.depositButton.disabled=!1,[2]}})})},this.opts=t,this.elems={},this.state={},t.farmAddress),n=t.rewardsAddress,a=t.stakingAddress;if(!e||!n||!a)throw new Error('Widget requires "farmAddress", "rewardsAddress", "stakingAddress" options');this.injectHtml(t),this.initCommon(),v.subscribe("account connected",this.init)}q.prototype.injectHtml=function(i){var t=this,e=document.getElementById(i.selector),n=(e.classList.add("ff-widget"),e.innerHTML=(o={withAPY:Boolean(this.opts.apy),withAPR:Boolean(this.opts.apr),apyLabel:this.opts.apyLabel,aprLabel:this.opts.aprLabel},n=o.withAPY,s=o.withAPR,a=o.apyLabel,o=o.aprLabel,'\n  <div class="ff-widget-headline">\n    <div class="ff-widget-token-icons">\n      <div class="ff-widget-token-icon">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div class="ff-widget-token-icon">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n    <div class="ff-title-and-timer">\n      <div class="ff-widget-title">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div class="ff-widget-timer">--:--:--:--</div>\n    </div>\n  </div>\n  <div class="ff-widget-section ff-widget-stats">\n    '+(n?'\n      <div class="ff-widget-row2">\n        <div class="ff-widget-label">'+(void 0===a?"APY":a)+':</div>\n        <div class="ff-widget-value ff-widget-apy">\n          <span class="ff-skeleton"></span>\n        </div>\n      </div>\n    ':"")+"\n    "+(s?'\n      <div class="ff-widget-row2">\n        <div class="ff-widget-label">'+(void 0===o?"APR":o)+':</div>\n        <div class="ff-widget-value ff-widget-apr">\n          <span class="ff-skeleton"></span>\n        </div>\n      </div>\n    ':"")+'  \n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">Deposit:</div>\n      <div class="ff-widget-value ff-widget-deposit-token-name">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>  \n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">Earn:</div>\n      <div class="ff-widget-value ff-widget-earn-token-name">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">APY per token in day:</div>\n      <div class="ff-widget-value ff-widget-reward-rate">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n    <div class="ff-widget-row2 ff-widget-user-apy-holder ff-hidden">\n      <div class="ff-widget-label">Your Reward per token in day:</div>\n      <div class="ff-widget-value ff-widget-user-apy">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">\n        TVL:\n        <span>\n          <span class="ff-skeleton"></span>\n        </span>\n      </div>\n      <div class="ff-widget-value ff-widget-tvl-token-name">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n  </div>\n  <div class="ff-widget-section ff-widget-earn-section ff-hidden">\n    <div class="ff-widget-section-title">\n      <b class="ff-rewards-token-name">\n        <span class="ff-skeleton"></span>\n      </b> Earned\n    </div>\n    <div class="ff-widget-row">\n      <div class="ff-widget-value ff-widget-earned-amount">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div>\n        <button class="ff-button ff-widget-harvest-button" type="button" disabled>Harvest</button>\n      </div>\n    </div>\n  </div>\n  <div class="ff-widget-section ff-widget-stake-section ff-hidden">\n    <div class="ff-widget-section-title">\n      <b class="ff-staking-token-name">\n        <span class="ff-skeleton"></span>\n      </b> Staked\n    </div>\n    <div class="ff-widget-row">\n      <div class="ff-widget-value ff-widget-staked-amount">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div>\n        <button class="ff-button ff-widget-deposit-button" type="button" disabled>Deposit</button>\n        <button class="ff-button ff-widget-withdraw-button" type="button" disabled>Withdraw</button>\n      </div>\n    </div>\n  </div>\n  <div class="ff-widget-footer">\n    <button id="connect-wallet" class="ff-button ff-widget-unlock-button" type="button">Connect wallet</button>\n    <button class="ff-button ff-widget-approve-button ff-hidden" type="button">Approve contract</button>\n  </div>\n'),e.querySelector(".ff-widget-token-icons")),a=e.querySelector(".ff-widget-title"),s=e.querySelector(".ff-widget-timer"),o=e.querySelector(".ff-rewards-token-name"),r=e.querySelector(".ff-staking-token-name"),u=e.querySelector(".ff-widget-apy"),d=e.querySelector(".ff-widget-apr"),l=e.querySelector(".ff-widget-deposit-token-name"),c=e.querySelector(".ff-widget-tvl-token-name"),p=e.querySelector(".ff-widget-earn-token-name"),f=e.querySelector(".ff-widget-earn-section"),m=e.querySelector(".ff-widget-stake-section"),y=e.querySelector(".ff-widget-earned-amount"),h=e.querySelector(".ff-widget-staked-amount"),v=e.querySelector(".ff-widget-unlock-button"),w=e.querySelector(".ff-widget-approve-button"),b=e.querySelector(".ff-widget-deposit-button"),g=e.querySelector(".ff-widget-withdraw-button"),k=e.querySelector(".ff-widget-harvest-button"),T=e.querySelector(".ff-widget-reward-rate"),x=e.querySelector(".ff-widget-user-apy"),L=e.querySelector(".ff-widget-user-apy-holder");this.elems={root:e,tokenIcons:n,title:a,timer:s,rewardsTokenSymbol:o,stakingTokenSymbol:r,tvlTokenName:c,apyValue:u,aprValue:d,depositTokenName:l,earnTokenName:p,earnSection:f,stakeSection:m,earnedAmount:y,stakedAmount:h,unlockButton:v,approveButton:w,depositButton:b,withdrawButton:g,harvestButton:k,rewardRate:T,userRate:x,userRateHolder:L},v.addEventListener("click",function(){H()}),this.createButton(w,function(){return M(t,void 0,void 0,function(){var e,n,a,s;return C(this,function(t){switch(t.label){case 0:e=S(),a=e.web3,e=e.account,n=i.farmAddress,a=a.utils.toBN("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.contracts.staking.methods.approve(n,a).send({from:e})];case 2:return t.sent(),this.handleApproved(),[3,4];case 3:return s=t.sent(),console.error(s),A.open(s.message),[3,4];case 4:return[2]}})})})};return{init:function(n){return M(void 0,void 0,void 0,function(){return C(this,function(t){if(!n)throw new Error("options required");if("https:"!==location.protocol)throw new Error("FarmFactory requires HTTPS connection");var e;return i({opts:n}),(e=document.createElement("div")).setAttribute("id",s),document.body.appendChild(e),f(),[2]})})},Widget:q}}();
